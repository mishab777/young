<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat</title>
    <script src="https://cdn.jsdelivr.net/npm/emoji-picker-element"></script>
    <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
    crossorigin="anonymous"
  />
 
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<style>
    .chat-bg-container{
   width: 100%;
   height: 100vh;
   background-size: cover;
   opacity: 0.6;
   background-image: url(https://picjumbo.com/wp-content/uploads/woman-entrepreneur-working-on-her-modern-laptop.jpg);
    }
    .fixed-social-medias{
    position: fixed;
    display: flex;
    right:10px;
    bottom:10px;
    align-items: center;
    justify-content: space-evenly;
    flex-direction: row;
    height: 50px;
    width: 50px;
    z-index:3;
 }
 .fixed-social-medias img{
    height: 50px;
    width: 50px;
 }
  .popup {
  display: none;
  position: absolute;
  background-color: #fff;
  border: 1px solid #ccc;
  z-index: 1;
  right:50px;
  bottom:50px;
  width:400px;
   height:500px;
  background-color:white;
  border-radius:10px;
  overflow: hidden;
}
#whatsapp-icon{
    position:absolute;
    left:0;
    height:50px;
    width:50px;
    bottom:0;
    cursor:pointer;
}
.chat-content{
    width:100%;
    height:100%;
    display:flex;
    align-items:center;
    justify-content:space-between;
    flex-direction:column;
}
.chat-header{
  height: 60px;
  background-color: #6559A2;
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
}
.chat-header h1{
  color: white;
  font-size: 20px;
}
.chat-input{
  height: 60px;
  width: 90%;
  border-top: 1px solid rgb(231, 231, 231);
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: space-between;
}
.chat-input textarea{
  border: hidden;
  outline: none;
  resize: none; /* Prevent textarea resizing */
  overflow: hidden;
  font-size: 12px;
  height: 40px; /* Adjust height to match input type text */
  width: calc(100% - 40px); /* Adjust width to match input type text and button */
}
.chat-input button{
  border: hidden;
  outline: none;
  background: transparent;
}
.chat-input button img{
  width: 20px;
  height: 20px;
}
.chat-messages{
  height: auto;
  overflow-y: auto;
  width: 100%;
  overflow-x: hidden;
}
.main-text-area {
  height: 300px;
  overflow-y: scroll;
  width: 100%;
  overflow-x: hidden;
}


.time-stamp {
  position: relative;
  width: 100%;
  text-align: center;
  margin-top: 20px;
  margin-bottom: 19px;
  font-size: 12px;
  font-weight: normal;
  color: #7C7C7C;
}

.message {
  position: relative;
  display: block;
  height: 54px;
  width: 75%;
  font-size: 17px;
  font-weight: 400;
  border-radius: 20px;
}

.message.from {
  color: white;
  background-color: #827DCF;
  margin-left: 26px;
  margin-bottom: 10px;
  border: hidden;
  padding: 10px;
  height: auto;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
}

.message.to {
  color: #7C7C7C;
  background-color: #F1F1F1;
  margin-right: 26px;
  float: right;
  margin-bottom: 10px;
  border:  1px solid transparent;
  font-size: 14px;
  height: auto;
  padding: 10px;
}
.message.to:hover {
  color: #827DCF; /* Change text color */
  border-color: #827DCF;  /* Change border color */
}
.message.user {
  color: #7C7C7C;
  background-color: #F1F1F1;
  margin-right: 26px;
  float: right;
  margin-bottom: 10px;
  border:  1px solid transparent;
  font-size: 14px;
  height: auto;
  padding: 10px;
}

.message p {
  text-align: right;
  padding-top: 14px;
  padding-left: 20px;
  font-size: 12px;
  margin: 0;
}

.message:after {
  position: absolute;
  width: 0;
  height: 0;
  background-color: transparent;
  content: "";
  margin-top: -9px;
}

.delivered {
  float: right;
  display: block;
  clear: both;
  color: #d3d3d3;
  font-weight: 400;
  margin-right: 26px;
  margin-top: 9px;
  font-size: 14px;
}



</style>
<body>
<div class="chat-bg-container"></div>
<div class="fixed-social-medias">
<img id="whatsapp-icon" src="media/images/meetme.png" onclick="togglePopup()"/>
<div id="popup" class="popup">
<div class="chat-content">
<div class="chat-header">
<h1>Young and Right</h1>
</div>
<div class="chat-messages">
  <div class="main-text-area">
    <div class="time-stamp"><b>{{ current_time }}</b></div>
    <div class="message from">Welcome to Young And Right! Which service are you looking for today?</div>
    <div class="message from">Please select the services of your choice</div>
    <button class="message to"  onclick="sendMessage('Book Keeping')">Book Keeping</button>
    <button class="message to"  onclick="sendMessage('Auditing')">Auditing</button>
    <button class="message to"  onclick="sendMessage('Corporate tax registration')">Corporate tax registration</button>
    <button class="message to"  onclick="sendMessage('Vat Compliance')">Vat Compliance</button>
    <div class="delivered">Delivered</div>
  </div>
</div>
<div class="chat-input">
  <textarea id="userInput" placeholder="Type Your Message and Enter"></textarea>
  <button id="emojiPickerButton">ðŸ˜€</button>
  <button onclick="sendMessage()" ><img src="media/images/send.png" alt=""></button>
</div>
</div>
</div>
</div>

<script>
   
function togglePopup() {
  var popup = document.getElementById('popup');
  var whatsappIcon = document.getElementById('whatsapp-icon');
  var chattext = document.getElementById('need-help-div');

  if (popup.style.display === 'none' || popup.style.display === '') {
    popup.style.display = 'block';
    whatsappIcon.src = 'media/images/cross.png';
    chattext.style.display="none";
    
  } else {
    popup.style.display = 'none';
    whatsappIcon.src = 'media/images/meetme.png';
  }
}

document.getElementById('emojiPickerButton').addEventListener('click', function () {
    const picker = new EmojiPicker();
    picker.showPicker(document.getElementById('userInput'));
});

function sendMessage(buttonValue) {
  var userInput = document.getElementById('userInput').value;
  var message = userInput;
  if (buttonValue) {
    message += ' ' + buttonValue; // Concatenate button value with user input
  }

  var chatArea = document.querySelector('.main-text-area');
  var messageElement = document.createElement('div');
  messageElement.classList.add('message');
  messageElement.classList.add('user');
  messageElement.textContent = message;
  chatArea.appendChild(messageElement);
  
  // Scroll to the bottom of the chat area
  chatArea.scrollTop = chatArea.scrollHeight;
  
  document.getElementById("userInput").value = "";
}
document.getElementById("userInput").addEventListener("keydown", function(event) {
  if (event.key === "Enter") {
    event.preventDefault(); // Prevent default behavior (creating a new line)
    sendMessage(); // Call sendMessage() function
  }
});
document.getElementById("userInput").addEventListener("input", function() {
  var textarea = this;
  var maxChars = 40; // Maximum characters per line
  var value = textarea.value;
  var lines = value.split('\n');
  
  for (var i = 0; i < lines.length; i++) {
    if (lines[i].length > maxChars) {
      var line = lines[i];
      var newline = '';
      while (line.length > maxChars) {
        newline += line.substring(0, maxChars) + '\n';
        line = line.substring(maxChars);
      }
      newline += line;
      lines[i] = newline;
    }
  }
  
  textarea.value = lines.join('\n');
});

</script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"  integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"  crossorigin="anonymous" ></script>
</body>
</html>